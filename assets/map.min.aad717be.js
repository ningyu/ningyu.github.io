function initMap(){createMap(),setMapEvent(),addMapControl(),addRemark()}function createMap(){var a=new BMap.Map("dituContent"),b=new BMap.Point(116.429278,40.025009);a.centerAndZoom(b,13),window.map=a}function setMapEvent(){map.enableDragging(),map.enableScrollWheelZoom(),map.enableDoubleClickZoom(),map.enableKeyboard()}function addMapControl(){var a=new BMap.NavigationControl({anchor:BMAP_ANCHOR_TOP_LEFT,type:BMAP_NAVIGATION_CONTROL_LARGE});map.addControl(a);var b=new BMap.OverviewMapControl({anchor:BMAP_ANCHOR_BOTTOM_RIGHT,isOpen:0});map.addControl(b);var c=new BMap.ScaleControl({anchor:BMAP_ANCHOR_BOTTOM_LEFT});map.addControl(c)}function addRemark(){for(var a=0;a<lbPoints.length;a++){var b=lbPoints[a],c=b.point.split("|")[0],d=b.point.split("|")[1],e=new BMap.Point(c,d),f=(createIcon(b.icon),new BMap.Marker(e)),g=(createInfoWindow(a),new BMap.Label(b.title,{offset:new BMap.Size(b.icon.lb-b.icon.x+30,-10)}));g.setStyle({borderColor:"#fff",backgroundColor:"#000",color:"#B1FD02",cursor:"pointer",fontSize:"12px",padding:"5px"}),f.setLabel(g),map.addOverlay(f),f.setAnimation(BMAP_ANIMATION_BOUNCE),function(){var c=createInfoWindow(a),d=f;d.addEventListener("click",function(){this.openInfoWindow(c)}),c.addEventListener("open",function(){d.getLabel().hide()}),c.addEventListener("close",function(){d.getLabel().show()}),g.addEventListener("click",function(){d.openInfoWindow(c)}),b.isOpen&&(g.hide(),d.openInfoWindow(c))}()}}function createInfoWindow(a){var b=lbPoints[a],c=new BMap.InfoWindow("<b class='iw_poi_title' title='"+b.title+"'>"+b.title+"</b><div class='iw_poi_content'>"+b.content+"</div>");return c}function createIcon(a){var b=new BMap.Icon("http://map.baidu.com/image/us_cursor.gif",new BMap.Size(a.w,a.h),{imageOffset:new BMap.Size(-a.l,-a.t),infoWindowOffset:new BMap.Size(a.lb+5,1),anchor:new BMap.Size(a.x,a.h)});return b}var lbPoints=[{title:"在这旮睡觉",point:"116.422199|40.072570",content:"小区打听：小兵张嘎子！",isOpen:0,icon:{w:21,h:21,l:0,t:0,x:6,lb:5}},{title:"在这里劳动",point:"116.44697|39.965941",content:"前台接头：民兵葛二蛋！",isOpen:0,icon:{w:21,h:21,l:0,t:0,x:6,lb:5}}];initMap();